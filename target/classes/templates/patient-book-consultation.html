<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">

 <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../../bootstrap/bootstrap-4.0.0-dist/css/bootstrap-grid.min.css">
    <link rel="stylesheet" href="../../bootstrap/bootstrap-4.0.0-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">   

	<link rel="stylesheet" type="text/css" media="all" 	href="../../css/general.css" th:href="@{/css/general.css}" />


    <link rel="stylesheet" type="text/css" media="all" 	href="../../css/home.css" th:href="@{/css/home.css}" />

<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://unpkg.com/gijgo@1.9.13/js/gijgo.min.js" type="text/javascript"></script>
    <link href="https://unpkg.com/gijgo@1.9.13/css/gijgo.min.css" rel="stylesheet" type="text/css" />

<link rel="stylesheet" type="text/css" media="all" 	href="../../css/manage.css" th:href="@{/css/manage.css}" />


<title>HOME DOCTOR</title>
</head>
<body>

  <header th:insert="fragments/general.html :: header"> </header> 

      <nav id="nav2" class="navbar  navbar-default navbar-expand-lg navbar-light bg-info">
      <div class="container-fluid">
    
    <div class="collapse navbar-collapse" id="homenavbar2">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
       
         <li class="nav-item">
        <a class="nav-link" aria-current="page" href="../../doctors/list" th:href="@{/doctors/list}" >Our Doctors</a>
        </li>
        <li class="nav-item">
        <a class="nav-link " aria-current="page" href="../../appointment/bookAvailDoctor" th:href="@{/appointment/bookAvailDoctor}">Book Consultation</a>
        </li>
        <li class="nav-item">
        <a class="nav-link " aria-current="page" href="../../consultationhistory/list" th:href="@{/consultationhistory/list}" >Consultation History</a>
        </li>
        
         
                
      </ul>
      
    </div>
  </div>
</nav>


  
 
 
  <div class="container">
        <div class="row justify-content-center  align-items-center">
            <div class="px-xl-5 py-4">
                <h2 class="text-capitalize">Book your appointment</h2>
                
      		    <br /> <br />     
                
     <form id="form" action="" th:object="${appointment}"  th:action="@{/appointment/book}" method="get">
        <input type="hidden"  id="doc_id" th:field="*{doctor.doctorId}" />
        <input type="hidden" th:field="*{patient.patientId}" />
        <!-- <input name="doctorId" type="hidden" value="${docId}">
        <input name="date" type="hidden" value="${date1}"> -->
         <table class="center">
         <tr>
             <td>
             <fieldset>
             Doctor Name: <input type = "text"
             th:field="${appointment.doctor.firstName}" id = "docfirstname">
             </fieldset>
             </td>
             <td>
             <fieldset>
             Patient Name: <input type ="text"
             th:field="${appointment.patient.firstName}" id = "patfirstname">
             </fieldset>
             </td>
            </tr>
            <tr>
            <td>Select Date </td>
            <td>Select Time  </td>
            </tr>
            
           
            
            <tr>
            <td>
            <fieldset>
            <input id="datepicker" th:field="*{appointmentDate}"  width="276" />
      <script>
           $('#datepicker').datepicker({
        	   
              uiLibrary: 'bootstrap4',
               format: 'dd-mm-yyyy'
               
           });
      </script>
            
            </fieldset>
            </td>
            
    <td>
              <fieldset>
              <div id="replace_div">
              <input name="doctorId" type="hidden" th:value="${docId}">
        		<input name="date" type="hidden" th:value="${date1}">
             
               <select name="appointmentTime">
    <option th:each="timeOpt : ${T(sg.edu.iss.telemedicine.domain.TimeSlots).values()}" 
        th:value="${timeOpt}" th:text="${timeOpt.displayValue}"></option>
</select>
       </div>
       
       <!-- JQury from Google CDN -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

        <!-- <script th:inline="javascript">
       		 
        	
        	
        	
            $(document).ready(function () {
            	
            	

                //call function when page is loaded
                /* $(".date").datepicker({
    onSelect: function(dateText) { */

                //set on change listener
                $('#datepicker').change(getContent);
                
                getContent();

                function getContent() {
                	
                	//alert($(this).val());
                	
                	var docId=document.getElementById('doc_id').value;
                	var date1=$(this).val();
                	
                	//alert(date1);
                	//alert(docId);

                    //create url to request fragment
                    var url = /appointment/;
                    //url = url + "slots/{"+docId+"}/{"+date1+"}";
                   url = url + "slots";
                    
                   $.ajax({
                       url: url,
                       type: 'GET',
                       data: {doctorId:docId,date:date1},
                       success: function(data){
                       	$('#replace_div').load(url);
                    }
                 });
                   
                    //load fragment and replace content
                   // $('#replace_div').load(url);
                }
            })
        </script>
       
       
        -->
               </fieldset>
              </td> 
            
  </table>
               
               
               <br /> <br /> <br /> <br />       
                    
                        <div class="col-lg-12">
                            <button type="submit" class="btn mt-3  mb-3 bg-success" tabindex="7">Book</button>
                        </div>
                    
                    <div class="form-row my-auto justify-content-center align-items-center">
                        <div class="col-lg-12 " id="error_msg">
                            <!-- @ViewData["errmsg"] -->
                        </div>
                    </div>
            </form>
            </div>
        </div>
    </div>

    
    
   <br />
	 <div th:replace="fragments/general.html :: footer"></div> 

    <!-- jQuery library -->
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<!--Popper JS-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>

<!--Latest compiled JavaScript-->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

 


</body>
</html>